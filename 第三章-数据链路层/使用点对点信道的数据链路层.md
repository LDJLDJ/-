链路：从一个结点到相邻结点的一段物理线路，而中间没有任何其他的交换结点。  
数据链路：除了必须有一条物理线路外，还必须有一些必要的通信协议来控制这些数据的传输。  
帧：数据链路层的协议数据单位。（数据链路层把网络层交下来的数据构成帧发送到链路上，以及把接受到的帧中的数据去除并上交给网络层。网络协议数据单元就是  
IP数据包或称数据报、分组、包）  

<img src="./imgs/使用点到点信道的数据链路层.png" width="800" height="400"  alt="使用点到点信道的数据链路层" >

### 封装成帧

------------
网络层的IP数据报必须向下传送到数据链路层，成为帧的数据部分。  
封装成帧(framing)就是在一段数据的前后分别添加首部和尾部，然后就构成了一个帧。确定帧的界限。  
首部和尾部的一个重要作用就是进行**帧定界**。

<img src="./imgs/用首部和尾部封装成帧.png" width="800" height="400"  alt="用首部和尾部封装成帧" >

1、当物理链路提供的是面向字符的传输服务（物理链路以字符为单位传输数据），帧定界标志可使用特殊不可打印的控制字符作为帧定界符。（ASCII码为7位编码，一共128  
不同ASCII码，其中95个可打印，33个无法打印）  
2、当数据部分非ASCII码时（如程序或图片汉字等），如果数据中的某个字节的二进制代码恰好是帧定界符一样。则需要数据链路层提供**透明传输**  
对于面对字符的物理链路，可以使用字节填充或字符填充。在数据链路层的数据中出现标记字符前面插入**转义字符**（如ESC字符）。  

<img src="./imgs/用字节填充法解决透明传输的问题.png" width="800" height="400"  alt="用字节填充法解决透明传输的问题" >

3、当物理链路层提供的是面向比特的传输服务时（即连续的比特流），帧定界标志可使用某个特别的比特组合，如：PPP协议所使用的零比特填充法“01111110”。  

<img src="./imgs/零比特的填充与删除.png" width="800" height="400"  alt="零比特的填充与删除" >

### 差错检测

--------------
在传输过程中可能会产生比特差错：1 可能会变成 0 而 0 也可能变成 1。  
在一段时间内，传输错误的比特占所传输比特总数的比率称为误码率 BER (Bit Error Rate)。  
误码率与信噪比有很大的关系。  
为了保证数据传输的可靠性，在计算机网络传输数据时，必须采用各种差错检测措施。  
在数据链路层，为了便于硬件检测差错，通常在帧的尾部设置一个差错检验字段存放整个帧（包含首部和数据）的差错检测码，这种差错检验字段称为**帧检验序列FCS**   
在数据链路层传送的帧中，广泛使用了**循环冗余检验 CRC**的检错技术  

<img src="./imgs/说明循环冗余检验原理的例子.png" width="800" height="400"  alt="说明循环冗余检验原理的例子" >

余数R就作为冗余码拼接在数据的后面发送出去。因此加上冗余码发送的帧是101001001。  
(1) 若得出的余数 R = 0，则判定这个帧没有差错，就接受(accept)。  
(2) 若余数 R 不等于 0，则判定这个帧有差错，就丢弃。  
但这种检测方法并不能确定究竟是哪一个或哪几个比特出现了差错。只要经过严格的挑选，并使用位数足够多的除数 P，那么出现检测不到的差错的概率就很小很小。  
如（除数P为2，那么余数等于0的有全部的偶数。）
```
应当注意
仅用循环冗余检验 CRC 差错检测技术只能做到无差错接受(accept)。
无差错接受”是指：“凡是接受的帧（即不包括丢弃的帧），我们都能以非常接近于 1 的概率认为这些帧在传输过程中没有产生差错”
也就是说：“凡是接收端数据链路层接受的帧都没有传输差错”（有差错的帧就丢弃而不接受）。
要做到“可靠传输”（即发送什么就收到什么）就必须再加上确认和重传机制。
```




