### 进程之间的通信

------------------
运输层向它上面的应用层提供端到端的通信服务。  
只有主机的协议栈有运输层，路由器在转发分组都只在下三层的功能。  
```
既然IP协议能够将源主机发出的分组按照首部中的目的地址送交给目的主机，那么为什么要设置运输层？  
答：  
从IP层来说，通信的两端是两个主机。两个主机通信实际上是两个主机的应用程序在通信。IP协议虽然把分组送到目的地址，但分组还停留在主机的网络层  
没有交付给主机的应用进程。从运输层来说，端到端的通信是应用进程之间的通信。  
```
运输层有复用和分用两功能：  
（1）复用：指在发送方不同的应用进程都可以使用同一个运输层协议传送数据（加上适当的首部）。  
（2）分用：指接收方在运输车在剥去报文首部后能够把数据正确交付给目的应用进程。  

### 因特网的运输协议

-------------------
因特网（一般是说TCP/IP网络）为上层应用提供两个不同的运输层协议：
（1）UDP用户数据报协议  
（2）TCP传输控制协议  

传输层和应用层之间的关系：  
http = TCP + 80端口  
https = TCP + 443  
ftp = TCP + 21  
SMTP = TCP + 25  
POP3 = TCP + 110  
RDP = TCP + 3389  
共享文件夹 = TCP + 445  
SQL = TCP + 1433  
DNS = UDP + 53 or TCP + 53（少用）  

### 运输层的复用和分用  

----------------------
应用层所有的应用进程都可以通过运输层再传送到IP层，这就是复用。  
运输层从IP层收到数据后必须交付给指名的应用进程，这就是分用。  
运输层要能正确地将数据交付给指定应用进程，就必须给每个应用程序赋予一个明确的标志。在TCP/IP网络中，使用与操作系统无关的协议端口号作为标记。  
端口号是一个16位（65535）的标志。端口号只具有本地意义。  

运输层的端口号可分为以下3类：  
（1）熟知端口：数值0-1023，负责分配一些常用的应用层程序固定使用，因而所有用户进程都知道。需要向IANA申请。 

|应用程序|FTP|TELNET|SMTP|DNS|TFTP|HTTP|SNMP|SNMP（trap）|
|-------|---|------|----|---|----|----|-----|-----------|
|熟知端口|21|23|25|53|69|80|161|162|

（2）登记端口：值为1024-49151，这类端口不受IANA控制，但可以在IANA注册登记，以防止重复使用。  
（3）动态端口：数值为49152-65535，留给客户端进程选择作为临时端口。  













